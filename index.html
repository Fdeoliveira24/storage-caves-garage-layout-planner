<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Garage Layout Planner - Professional Storage Planning Tool 1.5</title>
    <meta name="date" content="2025-01-18" />

    <!-- CSS -->
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/variables.css" />
    <link rel="stylesheet" href="css/layout.css" />
    <link rel="stylesheet" href="css/components/toolbar.css" />
    <link rel="stylesheet" href="css/components/sidebar.css" />
    <link rel="stylesheet" href="css/components/canvas.css" />
    <link rel="stylesheet" href="css/components/info-panel.css" />
    <link rel="stylesheet" href="css/components/modal.css" />
    <link rel="stylesheet" href="css/responsive.css" />
    <link rel="stylesheet" href="css/mobile-redesign.css" />
    <link rel="stylesheet" href="css/main.css" />
  </head>
  <body>
    <div id="app-loading">Loading Garage Plannerâ€¦</div>
    <div class="app-container">
      <!-- Header -->
      <header class="header">
        <div class="header-left">
          <img src="assets/images/logo/Storage-Caves-Logo.png" alt="Storage Caves Logo" class="app-logo" />
          <h1>Garage Layout Planner - Professional Storage Planning Tool 1.4</h1>
        </div>
        <div class="project-name-container" title="Double-click to rename project">
          <span id="project-name" class="project-name">Untitled Layout</span>
          <button id="btn-rename-project" class="btn-rename" title="Rename project" aria-label="Rename project">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"
              />
            </svg>
          </button>
        </div>
      </header>

      <!-- Sidebar Backdrop (mobile only) -->
      <div id="sidebar-backdrop" class="sidebar-backdrop"></div>

      <!-- Main Content -->
      <div class="main-content">
        <!-- Sidebar -->
        <aside class="sidebar">
          <button
            id="sidebar-close"
            class="sidebar-close"
            style="display: none"
            title="Close menu"
            aria-label="Close sidebar"
          >
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"
              />
            </svg>
          </button>
          <div class="sidebar-tabs">
            <div class="sidebar-tab active" data-tab="floorplans">Floor Plans</div>
            <div class="sidebar-tab" data-tab="items">Items</div>
            <div class="sidebar-tab" data-tab="saved">Saved</div>
          </div>

          <div class="sidebar-content">
            <!-- Floor Plans Tab -->
            <div id="floorplan-tab" class="tab-content">
              <div id="floorplan-list"></div>
            </div>

            <!-- Items Tab -->
            <div id="items-tab" class="tab-content hidden">
              <div id="item-palette"></div>
            </div>

            <!-- Saved Layouts Tab -->
            <div id="saved-tab" class="tab-content hidden">
              <div id="saved-layouts-list"></div>
            </div>
          </div>
        </aside>

        <!-- Canvas Area -->
        <div class="canvas-container">
          <!-- Toolbar -->
          <div class="toolbar">
            <!-- FILE SECTION -->
            <div class="toolbar-section toolbar-section--file">
              <button
                id="btn-toggle-sidebar"
                class="btn btn-toolbar btn-icon-only tooltip"
                data-tooltip="Toggle sidebar"
                aria-pressed="false"
              >
                <span class="btn-icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="3" width="18" height="18" rx="2" />
                    <line x1="9" y1="3" x2="9" y2="21" />
                  </svg>
                </span>
              </button>
              <button id="btn-new" class="btn btn-toolbar tooltip" data-tooltip="New layout">
                <span class="btn-icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                    <polyline points="14 2 14 8 20 8" />
                    <line x1="12" y1="11" x2="12" y2="17" />
                    <line x1="9" y1="14" x2="15" y2="14" />
                  </svg>
                </span>
                <span class="btn-label">New</span>
              </button>
              <button id="btn-save" class="btn btn-toolbar tooltip" data-tooltip="Save layout">
                <span class="btn-icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" />
                    <polyline points="17 21 17 13 7 13 7 21" />
                    <polyline points="7 3 7 8 15 8" />
                  </svg>
                </span>
                <span class="btn-label">Save</span>
              </button>
              <div class="dropdown">
                <button id="btn-export" class="btn btn-toolbar tooltip" data-tooltip="Import or export layouts">
                  <span class="btn-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                      <polyline points="16 16 12 12 8 16" />
                      <line x1="12" y1="12" x2="12" y2="21" />
                      <path d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3" />
                      <polyline points="16 16 12 12 8 16" />
                    </svg>
                  </span>
                  <span class="btn-label">Import / Export</span>
                  <span class="btn-chevron" aria-hidden="true">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                      <polyline points="6 9 12 15 18 9" />
                    </svg>
                  </span>
                </button>
                <div class="dropdown-menu dropdown-menu--list">
                  <div class="dropdown-list">
                    <button id="btn-export-json" class="dropdown-item">
                      <span class="item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                          <polyline points="14 2 14 8 20 8" />
                          <line x1="16" y1="13" x2="8" y2="13" />
                          <line x1="16" y1="17" x2="8" y2="17" />
                        </svg>
                      </span>
                      <span class="item-label">Export as JSON</span>
                    </button>
                    <button id="btn-export-png" class="dropdown-item">
                      <span class="item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                          <circle cx="8.5" cy="8.5" r="1.5" />
                          <polyline points="21 15 16 10 5 21" />
                        </svg>
                      </span>
                      <span class="item-label">Export as PNG</span>
                    </button>
                    <button id="btn-export-pdf" class="dropdown-item">
                      <span class="item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                          <polyline points="14 2 14 8 20 8" />
                          <path d="M9 15h6" />
                        </svg>
                      </span>
                      <span class="item-label">Export as PDF</span>
                    </button>
                    <button id="btn-share-email" class="dropdown-item">
                      <span class="item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" />
                          <polyline points="22,6 12,13 2,6" />
                        </svg>
                      </span>
                      <span class="item-label">Share via Email</span>
                    </button>
                    <button id="btn-import-json" class="dropdown-item">
                      <span class="item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <polyline points="16 16 12 12 8 16" />
                          <line x1="12" y1="12" x2="12" y2="21" />
                          <path d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3" />
                        </svg>
                      </span>
                      <span class="item-label">Import layout</span>
                    </button>
                  </div>
                </div>
              </div>
              <input type="file" id="json-file-input" accept=".json,application/json" style="display: none" />
            </div>

            <span class="toolbar-divider" aria-hidden="true"></span>

            <!-- EDIT SECTION -->
            <div class="toolbar-section toolbar-section--edit">
              <div class="dropdown">
                <button id="btn-edit" class="btn btn-toolbar tooltip" data-tooltip="Edit actions">
                  <span class="btn-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
                      <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" />
                    </svg>
                  </span>
                  <span class="btn-label">Edit</span>
                  <span class="btn-chevron" aria-hidden="true">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                      <polyline points="6 9 12 15 18 9" />
                    </svg>
                  </span>
                </button>
                <div class="dropdown-menu dropdown-menu--list">
                  <div class="dropdown-list">
                    <button id="btn-undo" class="dropdown-item">
                      <span class="item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <path d="M3 7v6h6" />
                          <path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13" />
                        </svg>
                      </span>
                      <span class="item-label">Undo</span>
                    </button>
                    <button id="btn-redo" class="dropdown-item">
                      <span class="item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <path d="M21 7v6h-6" />
                          <path d="M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7" />
                        </svg>
                      </span>
                      <span class="item-label">Redo</span>
                    </button>
                    <div class="dropdown-divider" role="separator"></div>
                    <button id="btn-duplicate" class="dropdown-item">
                      <span class="item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                          <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                        </svg>
                      </span>
                      <span class="item-label">Duplicate</span>
                    </button>
                    <button id="btn-delete" class="dropdown-item">
                      <span class="item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <polyline points="3 6 5 6 21 6" />
                          <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
                          <line x1="10" y1="11" x2="10" y2="17" />
                          <line x1="14" y1="11" x2="14" y2="17" />
                        </svg>
                      </span>
                      <span class="item-label">Delete</span>
                    </button>
                    <div class="dropdown-divider" role="separator"></div>
                    <button id="btn-bring-front" class="dropdown-item">
                      <span class="item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <polyline points="17 11 12 6 7 11" />
                          <polyline points="17 18 12 13 7 18" />
                        </svg>
                      </span>
                      <span class="item-label">Bring to front</span>
                    </button>
                    <button id="btn-send-back" class="dropdown-item">
                      <span class="item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <polyline points="7 13 12 18 17 13" />
                          <polyline points="7 6 12 11 17 6" />
                        </svg>
                      </span>
                      <span class="item-label">Send to back</span>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <span class="toolbar-divider" aria-hidden="true"></span>

            <!-- TOOLS SECTION -->
            <div class="toolbar-section toolbar-section--tools">
              <div class="dropdown">
                <button
                  id="btn-ruler-grid"
                  class="btn btn-toolbar tooltip"
                  data-tooltip="Grid and ruler options"
                >
                  <span class="btn-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                      <rect x="3" y="3" width="18" height="18" rx="2" />
                      <line x1="3" y1="9" x2="21" y2="9" />
                      <line x1="3" y1="15" x2="21" y2="15" />
                      <line x1="9" y1="3" x2="9" y2="21" />
                      <line x1="15" y1="3" x2="15" y2="21" />
                    </svg>
                  </span>
                  <span class="btn-label">Ruler / Grid</span>
                  <span class="btn-chevron" aria-hidden="true">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                      <polyline points="6 9 12 15 18 9" />
                    </svg>
                  </span>
                </button>
                <div class="dropdown-menu dropdown-menu--list">
                  <div class="dropdown-list">
                    <button id="btn-measure" class="dropdown-item">
                      <span class="item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <rect x="2" y="7" width="20" height="10" rx="1" />
                          <line x1="6" y1="11" x2="6" y2="17" />
                          <line x1="10" y1="11" x2="10" y2="17" />
                          <line x1="14" y1="11" x2="14" y2="17" />
                          <line x1="18" y1="11" x2="18" y2="17" />
                        </svg>
                      </span>
                      <span class="item-label" id="measure-toggle-text">Measure Tool (Off)</span>
                    </button>
                    <button id="btn-toggle-grid" class="dropdown-item">
                      <span class="item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <rect x="3" y="3" width="7" height="7" />
                          <rect x="14" y="3" width="7" height="7" />
                          <rect x="14" y="14" width="7" height="7" />
                          <rect x="3" y="14" width="7" height="7" />
                        </svg>
                      </span>
                      <span class="item-label" id="grid-toggle-text">Hide Grid</span>
                    </button>
                    <button id="btn-toggle-rulers" class="dropdown-item">
                      <span class="item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <rect x="2" y="4" width="20" height="16" rx="2" />
                          <line x1="7" y1="8" x2="7" y2="12" />
                          <line x1="12" y1="8" x2="12" y2="16" />
                          <line x1="17" y1="8" x2="17" y2="12" />
                        </svg>
                      </span>
                      <span class="item-label" id="ruler-toggle-text">Hide Rulers</span>
                    </button>
                    <button id="btn-toggle-snap" class="dropdown-item">
                      <span class="item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <circle cx="12" cy="12" r="3" />
                          <line x1="3" y1="12" x2="9" y2="12" />
                          <line x1="15" y1="12" x2="21" y2="12" />
                          <line x1="12" y1="3" x2="12" y2="9" />
                          <line x1="12" y1="15" x2="12" y2="21" />
                        </svg>
                      </span>
                      <span class="item-label" id="snap-toggle-text">Enable Snap to Grid</span>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <span class="toolbar-divider" aria-hidden="true"></span>

            <!-- ZOOM SECTION -->
            <div class="toolbar-section toolbar-section--zoom">
              <div class="dropdown">
                <button id="btn-zoom" class="btn btn-toolbar tooltip" data-tooltip="Zoom control">
                  <span class="btn-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                      <circle cx="11" cy="11" r="8" />
                      <line x1="21" y1="21" x2="16.65" y2="16.65" />
                      <line x1="11" y1="8" x2="11" y2="14" />
                      <line x1="8" y1="11" x2="14" y2="11" />
                    </svg>
                  </span>
                  <span class="btn-label">Zoom</span>
                  <span id="zoom-percentage" class="btn-value">100%</span>
                  <span class="btn-chevron" aria-hidden="true">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                      <polyline points="6 9 12 15 18 9" />
                    </svg>
                  </span>
                </button>
                <div class="dropdown-menu dropdown-menu--list">
                  <div class="zoom-panel">
                    <label for="zoom-slider" class="zoom-slider-label">
                      <span>Zoom</span>
                      <span id="zoom-slider-value">100%</span>
                    </label>
                    <input
                      type="range"
                      id="zoom-slider"
                      class="zoom-slider"
                      min="10"
                      max="200"
                      value="100"
                      step="5"
                    />
                  </div>
                  <div class="dropdown-list">
                    <button id="btn-zoom-reset" class="dropdown-item">
                      <span class="item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3" />
                        </svg>
                      </span>
                      <span class="item-label">Fit to Screen</span>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <span class="toolbar-divider" aria-hidden="true"></span>

            <!-- VIEW SECTION -->
            <div class="toolbar-section toolbar-section--view">
              <div class="dropdown">
                <button id="btn-view" class="btn btn-toolbar tooltip" data-tooltip="View options">
                  <span class="btn-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                      <circle cx="12" cy="12" r="3" />
                    </svg>
                  </span>
                  <span class="btn-label">View</span>
                  <span class="btn-chevron" aria-hidden="true">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                      <polyline points="6 9 12 15 18 9" />
                    </svg>
                  </span>
                </button>
                <div class="dropdown-menu dropdown-menu--list">
                  <div class="dropdown-list">
                    <button id="btn-toggle-entry-label" class="dropdown-item">
                      <span class="item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <line x1="4" y1="9" x2="20" y2="9" />
                          <line x1="4" y1="15" x2="20" y2="15" />
                          <line x1="10" y1="3" x2="8" y2="21" />
                          <line x1="16" y1="3" x2="14" y2="21" />
                        </svg>
                      </span>
                      <span class="item-label" id="entry-label-toggle-text">Hide Entry Label</span>
                    </button>
                    <button id="btn-entry-zone-top" class="dropdown-item">
                      <span class="item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <polyline points="18 15 12 9 6 15" />
                        </svg>
                      </span>
                      <span class="item-label">Entry Zone: Top</span>
                    </button>
                    <button id="btn-entry-zone-bottom" class="dropdown-item" style="display: none">
                      <span class="item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <polyline points="6 9 12 15 18 9" />
                        </svg>
                      </span>
                      <span class="item-label">Entry Zone: Bottom</span>
                    </button>
                    <button id="btn-entry-zone-left" class="dropdown-item" style="display: none">
                      <span class="item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <polyline points="15 18 9 12 15 6" />
                        </svg>
                      </span>
                      <span class="item-label">Entry Zone: Left</span>
                    </button>
                    <button id="btn-entry-zone-right" class="dropdown-item" style="display: none">
                      <span class="item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <polyline points="9 6 15 12 9 18" />
                        </svg>
                      </span>
                      <span class="item-label">Entry Zone: Right</span>
                    </button>
                    <button id="btn-toggle-entry-border" class="dropdown-item">
                      <span class="item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <rect x="3" y="3" width="18" height="18" rx="2" />
                        </svg>
                      </span>
                      <span class="item-label" id="entry-border-toggle-text">Hide Entry Border</span>
                    </button>
                    <button id="btn-floorplan-lock" class="dropdown-item">
                      <span class="item-icon" id="floorplan-lock-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <rect x="5" y="11" width="14" height="11" rx="2" ry="2" />
                          <path d="M7 11V7a5 5 0 0 1 10 0v4" />
                        </svg>
                      </span>
                      <span class="item-label" id="floorplan-lock-text">Lock Floor Plan</span>
                    </button>
                    <button id="btn-floorplan-center" class="dropdown-item">
                      <span class="item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <circle cx="12" cy="12" r="10" />
                          <circle cx="12" cy="12" r="3" />
                        </svg>
                      </span>
                      <span class="item-label">Re-center Floor Plan</span>
                    </button>
                    <button id="btn-toggle-labels" class="dropdown-item">
                      <span class="item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                          <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" />
                          <line x1="7" y1="7" x2="7.01" y2="7" />
                        </svg>
                      </span>
                      <span class="item-label" id="labels-toggle-text">Hide Labels</span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Canvas -->
          <div class="canvas-wrapper">
            <canvas id="canvas"></canvas>
          </div>

          <!-- Info Bar -->
          <div class="info-bar" id="info-panel"></div>
        </div>
      </div>

      <!-- Mobile Bottom Toolbar -->
      <div class="mobile-toolbar" style="display: none">
        <button
          id="mobile-menu-toggle"
          class="btn btn-icon"
          title="Toggle menu"
        >
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" />
          </svg>
        </button>
        <button id="mobile-btn-new" class="btn" title="New">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" />
          </svg>
          <span>New</span>
        </button>

        <button id="mobile-btn-undo" class="btn" title="Undo">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M12.5,8C9.85,8 7.45,9 5.6,10.6L2,7V16H11L7.38,12.38C8.77,11.22 10.54,10.5 12.5,10.5C16.04,10.5 19.05,12.81 20.1,16L22.47,15.22C21.08,11.03 17.15,8 12.5,8Z"
            />
          </svg>
          <span>Undo</span>
        </button>

        <button id="mobile-btn-redo" class="btn" title="Redo">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M18.4,10.6C16.55,9 14.15,8 11.5,8C6.85,8 2.92,11.03 1.54,15.22L3.9,16C4.95,12.81 7.95,10.5 11.5,10.5C13.45,10.5 15.23,11.22 16.62,12.38L13,16H22V7L18.4,10.6Z"
            />
          </svg>
          <span>Redo</span>
        </button>

        <button id="mobile-btn-rotate" class="btn" title="Rotate">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M15.55 5.55L11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42l1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z"
            />
          </svg>
          <span>Rotate</span>
        </button>

        <button id="mobile-btn-duplicate" class="btn" title="Duplicate">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"
            />
          </svg>
          <span>Copy</span>
        </button>

        <button id="mobile-btn-delete" class="btn" title="Delete">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"
            />
          </svg>
          <span>Delete</span>
        </button>

        <button id="mobile-btn-more" class="btn btn-primary" title="More">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z"
            />
          </svg>
          <span>More</span>
        </button>
      </div>
    </div>

    <!-- External Libraries -->
    <!-- Fabric.js (local-first with CDN fallback) -->
    <script src="js/vendor/fabric.min.js" onerror="window.__fabricLocalFailed=true;"></script>
    <script>
      (function () {
        const CDN_URL = 'https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js';
        const CDN_INTEGRITY =
          'sha512-P6uimDKoj1nnPSo2sPmgbZy99pPq9nHXhLwddOnLi1DC+fEM83FEUcHPRPifbx1rlRkdMinViaWyDfG45G9BuA==';

        window.__fabricReadyCallbacks = window.__fabricReadyCallbacks || [];

        function notifyReady() {
          if (window.__fabricReady) return;
          if (!window.fabric) {
            console.error('[Fabric] Library still unavailable after loading attempts.');
            alert('Garage Planner could not load Fabric.js. Please refresh or contact support.');
            return;
          }
          window.__fabricReady = true;
          const pending = window.__fabricReadyCallbacks.splice(0);
          pending.forEach((cb) => {
            try {
              cb();
            } catch (err) {
              console.error('[Fabric] Error in ready callback:', err);
            }
          });
        }

        if (window.fabric) {
          notifyReady();
          return;
        }

        const script = document.createElement('script');
        script.src = CDN_URL;
        script.integrity = CDN_INTEGRITY;
        script.crossOrigin = 'anonymous';
        script.onload = notifyReady;
        script.onerror = () => {
          console.error('[Fabric] CDN failed to load.');
          alert('Garage Planner could not load Fabric.js from the CDN. Please check your network.');
        };
        document.head.appendChild(script);
      })();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" defer></script>

    <!-- Core -->
    <script src="js/core/Config.js" defer></script>
    <script src="js/core/EventBus.js" defer></script>
    <script src="js/core/State.js" defer></script>

    <!-- Data -->
    <script src="js/data/items.js" defer></script>
    <script src="js/data/icons.js" defer></script>

    <!-- Utils -->
    <script src="js/utils/helpers.js" defer></script>
    <script src="js/utils/storage.js" defer></script>
    <script src="js/utils/bounds.js" defer></script>
    <script src="js/utils/geometry.js" defer></script>
    <script src="js/utils/validation.js" defer></script>

    <!-- UI -->
    <script src="js/ui/Modal.js?v=2.4.0" defer></script>
    <script src="js/ui/mobile/MobileUIManager.js?v=2.5.0" defer></script>

    <!-- Features -->
    <script src="js/features/measurement/MeasurementTool.js" defer></script>

    <!-- Managers -->
    <script src="js/managers/HistoryManager.js?v=2.4.0" defer></script>
    <script src="js/managers/CanvasManager.js?v=2.4.0" defer></script>
    <script src="js/managers/FloorPlanManager.js?v=2.4.0" defer></script>
    <script src="js/managers/ItemManager.js?v=2.4.0" defer></script>
    <script src="js/managers/SelectionManager.js?v=2.4.0" defer></script>
    <script src="js/managers/ExportManager.js?v=2.4.0" defer></script>

    <!-- App -->
    <script src="js/core/App.js?v=2.4.0" defer></script>
    <script src="js/main.js" defer></script>
  </body>
</html>
